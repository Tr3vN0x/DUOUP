<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duoup - Gaming Community</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* CSS Variables (from previous code) */
        :root {
            --color-dark-bg: #111122; /* Slightly darker base */
            --color-card-bg: #1A1A2E; /* Card background */
            --color-primary: #E94560; 
            --color-text-light: #F5F5F5;
            --color-text-fade: #A0A0A0;
            --color-border: #3A3A4A;
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Global & Reset */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: var(--font-main);
            background-color: var(--color-dark-bg);
            color: var(--color-text-light);
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
            display: flex; /* Ensure main content fills viewport for alignment */
            justify-content: center;
            align-items: center;
        }

        /* --- View Management --- */
        .app-view {
            width: 100%;
            display: none; /* Hidden by default, shown by JavaScript */
            padding: 20px;
        }
        #signup-view {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* --- Navigation Bar --- */
        .navbar {
            background-color: var(--color-card-bg);
            padding: 15px 30px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .navbar h1 {
            color: var(--color-primary);
            font-size: 1.8rem;
            letter-spacing: 1px;
        }
        .nav-link {
            color: var(--color-text-fade);
            text-decoration: none;
            margin-left: 20px;
            transition: color 0.2s;
        }
        .nav-link:hover {
            color: var(--color-text-light);
        }

        /* --- SIGNUP STYLES --- */
        .signup-card {
            max-width: 400px;
            width: 100%;
            background-color: var(--color-card-bg);
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        .signup-card h2 {
            text-align: center;
            color: var(--color-primary);
            margin-bottom: 25px;
            font-size: 2rem;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: var(--color-text-fade);
        }
        .form-group input {
            width: 100%;
            padding: 12px;
            background-color: var(--color-dark-bg);
            border: 1px solid var(--color-border);
            border-radius: 5px;
            color: var(--color-text-light);
            font-size: 1rem;
        }
        .btn-submit {
            width: 100%;
            padding: 12px;
            background-color: var(--color-primary);
            color: var(--color-text-light);
            border: none;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 10px;
        }
        .btn-submit:hover {
            background-color: #C63D55;
        }
        .error-message {
            color: var(--color-primary);
            text-align: center;
            margin-top: 15px;
        }

        /* --- HOME/PLAYER CARD STYLES --- */
        #home-view {
            padding-top: 80px; /* Space for sticky navbar */
        }
        .player-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 20px 0;
        }
        .player-card {
            background-color: var(--color-card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            transition: transform 0.2s;
        }
        .player-card:hover {
            transform: translateY(-5px);
            border: 1px solid var(--color-primary);
        }
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .card-header img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid var(--color-primary);
            margin-right: 15px;
        }
        .card-info h3 {
            font-size: 1.4rem;
            color: var(--color-text-light);
        }
        .card-info p {
            font-size: 0.85rem;
            color: var(--color-text-fade);
        }
        .card-tags {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }
        .card-tags li {
            background-color: var(--color-dark-bg);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: var(--color-primary);
        }
        .card-objective {
            font-size: 0.9rem;
            margin-bottom: 15px;
            height: 40px; /* Fixed height for consistent look */
            overflow: hidden;
            color: var(--color-text-fade);
        }
        .btn-friend {
            width: 100%;
            padding: 8px;
            background-color: var(--color-primary);
            color: var(--color-text-light);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .btn-friend:hover {
            background-color: #C63D55;
        }
        .btn-friend.sent {
            background-color: var(--color-border);
            pointer-events: none;
        }
        .btn-friend.sent:hover {
            background-color: var(--color-border);
        }
    </style>
</head>
<body>

    <main style="width: 100%;">

        <div class="navbar" id="main-nav" style="display: none;">
            <h1>Duoup</h1>
            <div>
                <a href="#" class="nav-link"><i class="fas fa-bell"></i> (0)</a>
                <a href="#" class="nav-link"><i class="fas fa-envelope"></i></a>
                <a href="#" class="nav-link" onclick="viewProfile()"><i class="fas fa-user-circle"></i> Profile</a>
            </div>
        </div>

        <div class="app-view" id="signup-view">
            <div class="signup-card">
                <h2>Join Duoup</h2>
                <form id="signup-form">
                    <div class="form-group">
                        <label for="username">Gamertag</label>
                        <input type="text" id="username" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" required>
                    </div>
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" required min="13">
                    </div>
                    <div class="form-group">
                        <label for="gameCode">Main Game / Platform (e.g., PC-Valorant)</label>
                        <input type="text" id="gameCode" required>
                    </div>
                    <button type="submit" class="btn-submit">Sign Up (Email/Pass)</button>
                    <p class="error-message" id="signup-error"></p>
                </form>
                <button class="btn-submit" style="background-color: #4285F4; margin-top: 10px;" onclick="handleGoogleSignIn()">
                    <i class="fab fa-google"></i> Sign Up with Google
                </button>
            </div>
        </div>

        <div class="app-view" id="home-view">
            <h2 class="section-heading" style="max-width: 1200px; margin: 20px auto; padding-left: 20px;">Find Your Duo</h2>
            <div class="player-grid" id="player-card-grid">
                </div>
        </div>

    </main>

    <script>
        // ====================================================================
        // JAVASCRIPT LOGIC (SIMULATED FIREBASE/RN CODE)
        // ====================================================================
        
        // --- View Management ---
        const views = {
            'signup-view': document.getElementById('signup-view'),
            'home-view': document.getElementById('home-view'),
        };
        const nav = document.getElementById('main-nav');

        function showView(viewId) {
            // Hide all views
            Object.values(views).forEach(v => v.style.display = 'none');
            // Show the requested view
            const targetView = views[viewId];
            if (targetView) {
                targetView.style.display = 'block';
            }
            // Toggle navbar visibility
            nav.style.display = (viewId === 'home-view') ? 'flex' : 'none';
            
            // Adjust body alignment for the specific view
            document.body.style.alignItems = (viewId === 'signup-view') ? 'center' : 'flex-start';
        }

        // --- Simulated User Data (Would come from Firebase Firestore) ---
        const userPool = [
            { id: 1, username: 'Silent_Sniper', age: 24, mainGame: 'Call of Duty: Warzone', platform: 'PS5', style: ['Casual', 'Voice Chat', 'LFG'], objective: 'Looking for smart teammates for high kill games. No rage quitters!', img: 'Player1' },
            { id: 2, username: 'Tank_Main_77', age: 32, mainGame: 'Overwatch 2', platform: 'PC', style: ['Competitive', 'Tank', 'Evenings'], objective: 'Climbing to Grandmaster. Need a consistent support line.', img: 'Player2' },
            { id: 3, username: 'Magic_Mage_X', age: 19, mainGame: 'League of Legends', platform: 'PC', style: ['Competitive', 'Mid-Lane', 'Chill'], objective: 'Always down for customs or grinding solo/duo queue. Add me!', img: 'Player3' },
            { id: 4, username: 'Aussie_Gamer', age: 27, mainGame: 'Valheim', platform: 'PC', style: ['Co-op', 'PVE', 'Relaxed'], objective: 'Building a massive settlement. Need builders and explorers!', img: 'Player4' },
            { id: 5, username: 'Rogue_Agent', age: 29, mainGame: 'Apex Legends', platform: 'PC', style: ['Competitive', 'IGL', 'Ranked'], objective: 'Pushing Masters. Requires high comms and rotations knowledge.', img: 'Player5' },
        ];

        // --- Firebase Simulation ---
        const errorDisplay = document.getElementById('signup-error');

        // Function simulates the core Firebase sign-up logic (from our previous code)
        async function handleSignupSubmit(event) {
            event.preventDefault();
            errorDisplay.textContent = ''; // Clear previous errors

            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const age = document.getElementById('age').value;
            const gameCode = document.getElementById('gameCode').value;

            // Basic client-side validation
            if (password.length < 6) {
                errorDisplay.textContent = 'Password must be at least 6 characters.';
                return;
            }
            if (parseInt(age) < 13) {
                 errorDisplay.textContent = 'You must be at least 13 to join Duoup.';
                 return;
            }

            console.log(`Simulating Firebase Auth and Profile Creation for: ${username}`);
            // --- ACTUAL FIREBASE CALL WOULD GO HERE ---
            // await handleEmailSignUp(email, password, username, age, gameCode);
            // -------------------------------------------
            
            errorDisplay.textContent = 'Account created! Redirecting...';
            setTimeout(() => {
                showView('home-view');
                renderPlayerCards();
            }, 1500);
        }

        // --- Google Sign-In Simulation ---
        function handleGoogleSignIn() {
            console.log('Simulating Google Sign-In...');
            // --- ACTUAL FIREBASE GOOGLE SIGN-IN CALL WOULD GO HERE ---
            // await handleGoogleSignIn(); 
            // -----------------------------------------------------------
            errorDisplay.textContent = 'Google sign-in successful! Redirecting...';
            setTimeout(() => {
                showView('home-view');
                renderPlayerCards();
            }, 1500);
        }

        // --- Friend Request Simulation ---
        function sendFriendRequest(userId, buttonElement) {
            console.log(`Simulating sending friend request to User ID: ${userId}`);
            // --- ACTUAL FIREBASE friendRequest Write Would Go Here ---
            // -----------------------------------------------------------
            
            buttonElement.textContent = 'Request Sent';
            buttonElement.classList.add('sent');
        }

        // --- Home View Rendering ---
        function createCardHTML(user) {
            const tags = user.style.map(tag => `<li>${tag}</li>`).join('');
            
            return `
                <div class="player-card">
                    <div class="card-header">
                        <img src="https://via.placeholder.com/60/${user.id % 2 === 0 ? '4A4E69' : 'E94560'}/FFFFFF?text=D" alt="Profile" />
                        <div class="card-info">
                            <h3>${user.username}</h3>
                            <p>${user.mainGame} | ${user.platform}</p>
                        </div>
                    </div>
                    <p class="card-objective">${user.objective}</p>
                    <ul class="card-tags">
                        <li style="background-color: var(--color-primary);">${user.mainGame}</li>
                        ${tags}
                    </ul>
                    <button class="btn-friend" onclick="sendFriendRequest(${user.id}, this)">
                        <i class="fas fa-user-plus"></i> Duo Up
                    </button>
                </div>
            `;
        }

        function renderPlayerCards() {
            const grid = document.getElementById('player-card-grid');
            grid.innerHTML = userPool.map(createCardHTML).join('');
        }

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            // Attach signup form listener
            document.getElementById('signup-form').addEventListener('submit', handleSignupSubmit);
            
            // Start on the signup view
            showView('signup-view');
        });

    </script>
</body>
</html>
