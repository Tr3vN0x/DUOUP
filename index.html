<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DuoUp Minimal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:sans-serif;background:#050510;color:white;display:flex;justify-content:center;align-items:center;height:100vh;}
input,button{padding:10px;margin:5px;border-radius:5px;border:none;}
button{cursor:pointer;}
.hidden{display:none;}
</style>
</head>
<body>

<div id="auth">
  <h2>DuoUp Auth</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button id="signin">Sign In</button>
  <button id="signup">Sign Up</button>
  <p id="msg"></p>
</div>

<div id="app" class="hidden">
  <h2>Welcome, <span id="user"></span></h2>
  <button id="logout">Logout</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";

const firebaseConfig = {
  apiKey:"AIzaSyDVHxatohLvJNqIHXjf1ZXdmmWX5W1EpNw",
  authDomain:"duoup-cfae6.firebaseapp.com",
  projectId:"duoup-cfae6"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const email = document.getElementById("email");
const password = document.getElementById("password");
const msg = document.getElementById("msg");
const authDiv = document.getElementById("auth");
const appDiv = document.getElementById("app");
const userSpan = document.getElementById("user");

document.getElementById("signin").onclick = async () => {
  try {
    await signInWithEmailAndPassword(auth, email.value, password.value);
    msg.textContent = "";
  } catch(e) { msg.textContent = e.message; }
};

document.getElementById("signup").onclick = async () => {
  try {
    await createUserWithEmailAndPassword(auth, email.value, password.value);
    msg.textContent = "User created!";
  } catch(e) { msg.textContent = e.message; }
};

document.getElementById("logout").onclick = () => signOut(auth);

onAuthStateChanged(auth, user => {
  if(user){
    authDiv.classList.add("hidden");
    appDiv.classList.remove("hidden");
    userSpan.textContent = user.email;
  } else {
    authDiv.classList.remove("hidden");
    appDiv.classList.add("hidden");
  }
});
</script>

</body>
</html>
